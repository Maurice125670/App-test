<div class="fiche-recommendation">
  <h2>{{ titre }}</h2>

  <!-- File d'Ariane -->
  <div class="timeline">
    <div
      class="arrow"
      [style.top]="currentStepIndex * 70 + 'px'"
    ></div>
    <div
      *ngFor="let step of recommandations; let i = index"
      class="timeline-item"
      [class.current]="i === currentStepIndex"
      [class.completed]="i < currentStepIndex"
    >
      <!-- Numéro de l'étape -->
      <div class="step-number">{{ i + 1 }}</div>

      <!-- Contenu affiché uniquement pour l'étape courante -->
      <div class="step-content" *ngIf="i <= currentStepIndex">
        <div class="step-text">{{ step.text }}</div>

        <!-- Image -->
        <img *ngIf="step.image" [src]="step.image" alt="Image étape {{ i + 1 }}" />

        <!-- Vidéo -->
        <video *ngIf="step.video" controls>
          <source [src]="step.video" type="video/mp4" />
        </video>

        <!-- Minuteur -->
        <div *ngIf="step.timer" class="timer">
          Minuteur : {{ step.timer }} secondes
        </div>

        <!-- Bouton pour valider l'étape -->
        <button *ngIf="i === currentStepIndex" (click)="nextStep()">Valider l'étape</button>
      </div>
    </div>
  </div>

  <!-- Message de fin -->
  <div *ngIf="isCompleted" class="completion-message">
    🎉 Toutes les étapes sont complétées !
  </div>
</div>
